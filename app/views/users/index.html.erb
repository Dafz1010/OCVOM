<div class="users-page g-0 d-flex flex-column" >
	<div class="col-12 row g-0 h-75">
		<div class="users-container col-12 h-100 px-2" >
			<div class="col-12 p-2 d-flex justify-content-between">
				<div>All Users</div>
				<%= button_to "Create User", register_path,method: :get, class: "btn btn-primary" %>
			</div>
			<div class="col-12 h-100 overflow-scroll" >
				<table class="table">
					<thead>
						<tr>
							<th scope="col">USERNAME</th>
							<th scope="col">TOTAL LOGS</th>
							<%# <th scope="col">OWNER</th> %>
							<th scope="col">USER TYPE</th>
							<th scope="col">DATE CREATED</th>
							<th scope="col"></th>
						</tr>
					</thead>
					<tbody>
						<% @approved_users.each do |user|%>
							<tr>
								<td><%= user.username %></td>
								<td><%= user.total_logs %></td>
								<td>
                                    <% unless current_user?(user)%>
                                        <%= form_with model: user, url: set_role_user_path(user), method: :patch do |form| %>
                                            <%= form.select :role_id, @roles,{prompt: "Unset"},{required: 'true', autocomplete: 'off',onchange: "this.form.submit()"}%>
                                        <% end %>
                                    <% else %>
                                        <%= user.type.capitalize%>
                                    <% end %>
                                </td>
								<%# <td><%= user.type.capitalize</td> %>
								<td><%= user.created_at.localtime.strftime("%b %d, %Y") %></td>
								<td>
									<div class="d-flex flex-row me-2 justify-content-center">
										<%= button_to "Show", user_path(user),method: :get, class: "btn btn-info me-1" %>
										<%= button_to "Archive User", user_path(user),method: :delete,data: {turbo_confirm: 'Are you sure you want to archive this user?'}, class: "btn btn-danger" unless current_user?(user) %>
									</div>
								</td>
							</tr>
						<% end %>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>